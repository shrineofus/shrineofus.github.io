<!-- ğŸ“– æ›¸æœ¬æŒ‰éˆ• -->
<button class="book-toggle-btn" id="open-book">ğŸ“–</button>

<!-- ğŸ“š æ›¸æœ¬å…¨è¢å¹•å®¹å™¨ -->
<div class="book-overlay" id="book-overlay">
  <div class="fullscreen-book">
    <h2>å‘½é‹ä¹‹æ›¸</h2>
    <div id="fullscreen-book-pages" class="book-pages">
      <div class="book-left-page"></div>
      <div class="book-right-page"></div>
    </div>
    <button class="toggle-btn" id="close-book">é—œé–‰å‘½é‹ä¹‹æ›¸</button>
  </div>
</div>

<script>
  const bookBtn = document.getElementById('open-book');
  const overlay = document.getElementById('book-overlay');
  const closeBtn = document.getElementById('close-book');
  const leftPage = document.querySelector('.book-left-page');
  const rightPage = document.querySelector('.book-right-page');

  bookBtn.addEventListener('click', () => {
    overlay.classList.add('book-open');
    renderBookPages();
  });

  closeBtn.addEventListener('click', () => {
    overlay.classList.remove('book-open');
  });

  function renderBookPages() {
    const log = JSON.parse(localStorage.getItem("drawHistory") || "[]");
    const today = new Date().toLocaleDateString();
    const entries = log.filter(e => e.time.startsWith(today));

    const mainCard = entries.find(e => e.type === "ä¸»ç‰Œ");
    const subCard = entries.find(e => e.type === "å‰¯ç‰Œ");

    leftPage.innerHTML = mainCard ? `
      <h3>ğŸ“… ${mainCard.time}</h3>
      <div class="history-entry">
        <p><strong>ï¼ˆ${mainCard.type}ï¼‰${mainCard.title}ï½œ${mainCard.orientation}</strong></p>
        <p>ğŸ”® ${mainCard.spell}</p>
        <p>${mainCard.description}</p>
      </div>
    ` : `<p>å°šæœªæŠ½å‡ºä¸»ç‰Œã€‚</p>`;

    rightPage.innerHTML = subCard ? `
      <h3>ğŸ“… ${subCard.time}</h3>
      <div class="history-entry">
        <p><strong>ï¼ˆ${subCard.type}ï¼‰${subCard.title}ï½œ${subCard.orientation}</strong></p>
        <p>ğŸ”§ ${subCard.spell}</p>
        <p>${subCard.description}</p>
      </div>
    ` : `<p>å°šæœªæŠ½å‡ºå‰¯ç‰Œã€‚</p>`;
  }
</script>




